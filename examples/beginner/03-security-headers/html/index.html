<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”’ nginx ë³´ì•ˆ í—¤ë” - ì´ˆë³´ì ê°€ì´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .badge {
            display: inline-block;
            background: #e74c3c;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin: 1rem 0;
        }
        
        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .security-headers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .header-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #e74c3c;
        }
        
        .header-card h3 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        
        .header-card .header-name {
            font-family: 'Courier New', monospace;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.9rem;
            margin: 0.5rem 0;
            display: inline-block;
        }
        
        .header-card p {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .test-section {
            background: #e8f5e8;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
            border-left: 4px solid #27ae60;
        }
        
        .test-section h3 {
            color: #27ae60;
            margin-bottom: 1rem;
        }
        
        .test-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }
        
        .test-button {
            background: #3498db;
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s ease;
        }
        
        .test-button:hover {
            background: #2980b9;
        }
        
        .results {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 1rem;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 1rem;
            min-height: 100px;
            white-space: pre-wrap;
        }
        
        .command-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
        }
        
        .command-section h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        
        .command {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 1rem;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 0.5rem 0;
            cursor: pointer;
        }
        
        .command:hover {
            background: #34495e;
        }
        
        .footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .security-headers {
                grid-template-columns: 1fr;
            }
            
            .test-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ”’ nginx ë³´ì•ˆ í—¤ë”</h1>
            <p>ì›¹ì‚¬ì´íŠ¸ ë³´ì•ˆì„ ê°•í™”í•˜ëŠ” HTTP ë³´ì•ˆ í—¤ë” ì„¤ì •</p>
            <div class="badge">ë ˆë²¨ 1: ê¸°ì´ˆ - ë³´ì•ˆ í—¤ë”</div>
        </header>
        
        <main class="content">
            <h2>HTTP ë³´ì•ˆ í—¤ë”ë€?</h2>
            <p>HTTP ë³´ì•ˆ í—¤ë”ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ê²Œ ë³´ì•ˆ ì •ì±…ì„ ì•Œë ¤ì£¼ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ XSS, í´ë¦­ì¬í‚¹, MIME ìŠ¤ë‹ˆí•‘ ë“± ë‹¤ì–‘í•œ ì›¹ ê³µê²©ì„ ë°©ì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <div class="security-headers">
                <div class="header-card">
                    <h3>ğŸ›¡ï¸ X-Frame-Options</h3>
                    <div class="header-name">X-Frame-Options: SAMEORIGIN</div>
                    <p>iframeì„ í†µí•œ í´ë¦­ì¬í‚¹ ê³µê²©ì„ ë°©ì§€í•©ë‹ˆë‹¤. ê°™ì€ ë„ë©”ì¸ì—ì„œë§Œ frame í—ˆìš©.</p>
                </div>
                
                <div class="header-card">
                    <h3>ğŸ” X-Content-Type-Options</h3>
                    <div class="header-name">X-Content-Type-Options: nosniff</div>
                    <p>ë¸Œë¼ìš°ì €ì˜ MIME íƒ€ì… ìŠ¤ë‹ˆí•‘ì„ ë°©ì§€í•˜ì—¬ íŒŒì¼ íƒ€ì… ê´€ë ¨ ê³µê²©ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="header-card">
                    <h3>âš¡ X-XSS-Protection</h3>
                    <div class="header-name">X-XSS-Protection: 1; mode=block</div>
                    <p>êµ¬ì‹ ë¸Œë¼ìš°ì €ì—ì„œ XSS ê³µê²©ì„ íƒì§€í•˜ê³  ì°¨ë‹¨í•©ë‹ˆë‹¤. (í˜„ì¬ëŠ” CSP ê¶Œì¥)</p>
                </div>
                
                <div class="header-card">
                    <h3>ğŸ”— Referrer-Policy</h3>
                    <div class="header-name">Referrer-Policy: strict-origin-when-cross-origin</div>
                    <p>ë‹¤ë¥¸ ì‚¬ì´íŠ¸ë¡œ ì´ë™í•  ë•Œ ì „ì†¡ë˜ëŠ” ë¦¬í¼ëŸ¬ ì •ë³´ë¥¼ ì œì–´í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="header-card">
                    <h3>ğŸ›¡ï¸ Content-Security-Policy</h3>
                    <div class="header-name">Content-Security-Policy: default-src 'self'</div>
                    <p>ì½˜í…ì¸  ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ XSS ê³µê²©ê³¼ ë°ì´í„° ì£¼ì… ê³µê²©ì„ ë°©ì§€í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="header-card">
                    <h3>ğŸ›ï¸ Permissions-Policy</h3>
                    <div class="header-name">Permissions-Policy: camera=(), microphone=()</div>
                    <p>ë¸Œë¼ìš°ì € ê¸°ëŠ¥(ì¹´ë©”ë¼, ë§ˆì´í¬ ë“±) ì‚¬ìš© ê¶Œí•œì„ ì œì–´í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
            
            <div class="test-section">
                <h3>ğŸ§ª ë³´ì•ˆ í—¤ë” í…ŒìŠ¤íŠ¸</h3>
                <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í˜„ì¬ í˜ì´ì§€ì˜ ë³´ì•ˆ í—¤ë”ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                <div class="test-buttons">
                    <button class="test-button" onclick="checkHeaders()">ğŸ“‹ ì‘ë‹µ í—¤ë” í™•ì¸</button>
                    <button class="test-button" onclick="testSecurity()">ğŸ” ë³´ì•ˆ í…ŒìŠ¤íŠ¸</button>
                    <button class="test-button" onclick="checkCSP()">ğŸ›¡ï¸ CSP ì •ì±… í™•ì¸</button>
                </div>
                <div id="results" class="results">ì—¬ê¸°ì— í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤...</div>
            </div>
            
            <div class="command-section">
                <h3>ğŸ’» ì»¤ë§¨ë“œë¼ì¸ í…ŒìŠ¤íŠ¸</h3>
                <p>í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ë³´ì•ˆ í—¤ë”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
                <div class="command" onclick="copyToClipboard(this)">curl -I http://localhost:8003</div>
                <div class="command" onclick="copyToClipboard(this)">curl -I http://localhost:8003/headers</div>
                <div class="command" onclick="copyToClipboard(this)">curl http://localhost:8003/security-test</div>
                <p><small>ğŸ’¡ ëª…ë ¹ì–´ë¥¼ í´ë¦­í•˜ë©´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë©ë‹ˆë‹¤.</small></p>
            </div>
            
            <h3>ğŸ¯ í•™ìŠµ ëª©í‘œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
            <div style="margin: 1rem 0;">
                <label style="display: block; margin: 0.5rem 0;"><input type="checkbox"> ë³´ì•ˆ í—¤ë”ì˜ ëª©ì ê³¼ ì¤‘ìš”ì„± ì´í•´</label>
                <label style="display: block; margin: 0.5rem 0;"><input type="checkbox"> ê° ë³´ì•ˆ í—¤ë”ì˜ ì—­í• ê³¼ ì„¤ì •ê°’ íŒŒì•…</label>
                <label style="display: block; margin: 0.5rem 0;"><input type="checkbox"> nginxì—ì„œ ë³´ì•ˆ í—¤ë” ì„¤ì • ë°©ë²• ìˆ™ì§€</label>
                <label style="display: block; margin: 0.5rem 0;"><input type="checkbox"> ë³´ì•ˆ í—¤ë” í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ë°©ë²• í•™ìŠµ</label>
                <label style="display: block; margin: 0.5rem 0;"><input type="checkbox"> ë¯¼ê°í•œ íŒŒì¼ ì ‘ê·¼ ì°¨ë‹¨ ì„¤ì • ì´í•´</label>
            </div>
        </main>
        
        <footer class="footer">
            <p>&copy; 2024 nginx ì´ˆë³´ì ê°€ì´ë“œ | ë ˆë²¨ 1: ê¸°ì´ˆ - ë³´ì•ˆ í—¤ë”</p>
            <p>ì„œë²„: localhost | í¬íŠ¸: 8003</p>
        </footer>
    </div>
    
    <script>
        async function checkHeaders() {
            const results = document.getElementById('results');
            results.textContent = 'í—¤ë” ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...';
            
            try {
                const response = await fetch('/headers');
                const headers = {};
                for (let [key, value] of response.headers.entries()) {
                    headers[key] = value;
                }
                
                let output = '=== HTTP ì‘ë‹µ í—¤ë” ===\n';
                Object.entries(headers).forEach(([key, value]) => {
                    output += `${key}: ${value}\n`;
                });
                
                results.textContent = output;
            } catch (error) {
                results.textContent = `ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        async function testSecurity() {
            const results = document.getElementById('results');
            results.textContent = 'ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘...';
            
            try {
                const response = await fetch('/security-test');
                const data = await response.json();
                
                let output = '=== ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ===\n';
                output += `ë©”ì‹œì§€: ${data.message}\n`;
                output += `í…ŒìŠ¤íŠ¸: ${data.test}\n\n`;
                
                // ë³´ì•ˆ í—¤ë” í™•ì¸
                const securityHeaders = [
                    'x-frame-options',
                    'x-content-type-options',
                    'x-xss-protection',
                    'referrer-policy',
                    'content-security-policy',
                    'permissions-policy'
                ];
                
                output += '=== ë³´ì•ˆ í—¤ë” ìƒíƒœ ===\n';
                securityHeaders.forEach(header => {
                    const value = response.headers.get(header);
                    output += `${header}: ${value ? 'âœ… ì„¤ì •ë¨' : 'âŒ ì—†ìŒ'}\n`;
                });
                
                results.textContent = output;
            } catch (error) {
                results.textContent = `ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        function checkCSP() {
            const results = document.getElementById('results');
            
            const csp = document.querySelector('meta[http-equiv="Content-Security-Policy"]');
            const responseCsp = new Headers(document.head.innerHTML).get('content-security-policy');
            
            let output = '=== Content Security Policy ë¶„ì„ ===\n';
            
            // í˜„ì¬ í˜ì´ì§€ì—ì„œ CSP í—¤ë” í™•ì¸
            fetch('/')
                .then(response => {
                    const cspHeader = response.headers.get('content-security-policy');
                    if (cspHeader) {
                        output += `CSP í—¤ë”: ${cspHeader}\n\n`;
                        
                        // CSP ì§€ì‹œì–´ ë¶„ì„
                        const directives = cspHeader.split(';').map(d => d.trim());
                        output += '=== CSP ì§€ì‹œì–´ ë¶„ì„ ===\n';
                        directives.forEach(directive => {
                            if (directive) {
                                output += `${directive}\n`;
                            }
                        });
                    } else {
                        output += 'CSP í—¤ë”ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n';
                    }
                    
                    results.textContent = output;
                })
                .catch(error => {
                    results.textContent = `CSP í™•ì¸ ì¤‘ ì˜¤ë¥˜: ${error.message}`;
                });
        }
        
        function copyToClipboard(element) {
            const text = element.textContent;
            navigator.clipboard.writeText(text).then(() => {
                const original = element.style.background;
                element.style.background = '#27ae60';
                setTimeout(() => {
                    element.style.background = original;
                }, 1000);
            });
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ í—¤ë” í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            checkHeaders();
        });
    </script>
</body>
</html>